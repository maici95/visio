(function(e){function t(t){for(var l,o,r=t[0],s=t[1],c=t[2],b=0,d=[];b<r.length;b++)o=r[b],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l]);u&&u(t);while(d.length)d.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],l=!0,r=1;r<a.length;r++){var s=a[r];0!==i[s]&&(l=!1)}l&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var l={},i={app:0},n=[];function o(t){if(l[t])return l[t].exports;var a=l[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=l,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)o.d(a,l,function(t){return e[t]}.bind(null,l));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/visio/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=s;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"452c":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var l=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"view"},on:{contextmenu:function(t){return e.rightClick.apply(null,arguments)},click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:function(){return e.addMenu=!1}.apply(null,arguments)}}},[a("div",{staticStyle:{position:"absolute",padding:"20px","z-index":"100"}},[a("b",{staticStyle:{background:"cyan",border:"2px solid #000",padding:"10px"}},[e._v(e._s(e.proMode?"PRO MODE":"EASY MODE"))]),e._v(" || "),a("button",{on:{click:function(){return e.proMode=!e.proMode}}},[e._v(" vaihda ")]),a("br"),a("br"),e._v(" ESC = poistaa valitun noden"),a("br"),e._v(" 1 = poistaa sinisen linkin"),a("br"),e._v(" 2 = poistaa oranssin linkin"),a("br"),e._v(" 3 = poistaa laatikon ")]),a("canvas",{ref:"canvas"}),e._l(e.objects,(function(t,l){return a("window-object",{key:l,attrs:{x:t.x,y:t.y,params:t.params,returns:t.returns,title:t.title,activeActor:e.activeActor==l,activeNode:e.activeNode},on:{updatePosition:function(t){return e.updatePosition(t,l)},paramClick:function(t){return e.handleParamClick(t,l)},returnClick:function(t){return e.handleReturnClick(t,l)},flowIn:function(t){return e.handleFlowIn(l)},flowOut:function(t){return e.handleFlowOut(l)}}})})),e.addMenu?a("div",{staticClass:"add-menu",style:{marginLeft:e.addMenuLocation[0]+"px",marginTop:e.addMenuLocation[1]+"px"}},e._l(e.getAddMenuContent,(function(t,l){return a("div",{key:"button"+l,staticClass:"option",style:{background:t.title?"#5EBA7D":""},on:{click:function(){return t.title?null:e.addActor(t.actor)}}},[a("div",{style:{marginLeft:t.title?"0":"10px"}},[e._v(" "+e._s(t.label)+" ")])])})),0):e._e()],2)},n=[],o=a("5530"),r=a("bee2"),s=a("d4ec"),c=(a("ac1f"),a("466d"),a("d3b7"),a("159b"),a("cb29"),a("c740"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",style:{marginLeft:e.x+"px",marginTop:e.y+"px",outline:e.activeActor?"3px solid red":""}},[e._t("default"),a("div",{staticClass:"header",attrs:{draggable:""},on:{drag:e.dragHandler,dragstart:e.dragStart}},[a("div",{staticClass:"flowicon",style:{outline:e.activeActor&&"flowin"==e.activeNode?"4px solid blue":""},on:{click:function(t){return e.$emit("flowIn",t)}}},[e._v(" >> ")]),a("h1",[e._v(" "+e._s(e.title)+" ")]),a("div",{staticClass:"flowicon",style:{outline:e.activeActor&&"flowout"==e.activeNode?"4px solid blue":""},on:{click:function(t){return e.$emit("flowOut",{})}}},[e._v(" >> ")])]),a("div",{staticClass:"bottom"},[a("div",e._l(e.params,(function(t,l){return a("div",{key:"p"+l},[a("div",{staticClass:"nodecon"},[a("div",{staticClass:"circle",style:{outline:e.activeActor&&e.activeNode=="param_"+t.label?"4px solid blue":""},on:{click:function(a){return e.$emit("paramClick",t)}}}),a("div",{staticStyle:{padding:"0 5px"}},[e._v(e._s(t.label))])])])})),0),a("div",e._l(e.returns,(function(t,l){return a("div",{key:"r"+l},[a("div",{staticClass:"nodecon"},[a("div",{staticStyle:{padding:"0 5px"}},[e._v(e._s(t.label))]),a("div",{staticClass:"circle",style:{outline:e.activeActor&&e.activeNode=="return_"+t.label?"4px solid blue":"",background:"green"},on:{click:function(a){return e.$emit("returnClick",t)}}})])])})),0)])],2)}),u=[],b=(a("a9e3"),{props:{x:[String,Number],y:[String,Number],params:Array,returns:Array,title:String,activeActor:Boolean,activeNode:String},data:function(){return{offsetX:0,offsetY:0}},methods:{dragHandler:function(e){0!=e.pageX&&0!=e.pageY&&this.$emit("updatePosition",[e.pageX-this.offsetX,e.pageY-this.offsetY])},dragStart:function(e){this.offsetX=Math.abs(this.x-e.pageX),this.offsetY=Math.abs(this.y-e.pageY),e.dataTransfer.setDragImage(e.target,window.outerWidth,window.outerHeight)}}}),d=b,f=(a("71ef"),a("2877")),v=Object(f["a"])(d,c,u,!1,null,"14998586",null),p=v.exports,k=Object(r["a"])((function e(t,a,l,i,n){Object(s["a"])(this,e),this.x=t,this.y=a,this.title=l,this.params=null!==i&&void 0!==i?i:[],this.returns=null!==n&&void 0!==n?n:[]})),h={components:{WindowObject:p},data:function(){return{objects:[],activeActor:{},activeNode:"",connections:[],nodeConnections:[],addMenu:!0,addMenuLocation:[200,200],proMode:!1,proContent:[{label:"Aloitus",title:!0},{label:"Pyyntö",actor:new k(0,0,"Pyyntö",[],[{label:"Tieto"}])},{label:"Valitsemet",title:!0},{label:"Valitse tunniste",actor:new k(0,0,"Valitse tunniste",[{label:"Tieto"}],[{label:"Tunniste"}])},{label:"Palvelimet",title:!0},{label:"Palvelin 1",actor:new k(0,0,"Palvelin 1",[],[{label:"Palvelin"}])},{label:"Palvelin 2",actor:new k(0,0,"Palvelin 2",[],[{label:"Palvelin"}])},{label:"Palvelin 3",actor:new k(0,0,"Palvelin 3",[],[{label:"Palvelin"}])},{label:"Palvelin 4",actor:new k(0,0,"Palvelin 4",[],[{label:"Palvelin"}])},{label:"Hakijat",title:!0},{label:"Kuskit",actor:new k(0,0,"Hae kuskit",[{label:"Palvelin"}],[{label:"Kuskit"}])},{label:"Materiaalit",actor:new k(0,0,"Hae materiaalit",[{label:"Palvelin"}],[{label:"Materiaalit"}])},{label:"Keikat",actor:new k(0,0,"Hae keikat",[{label:"Palvelin"}],[{label:"Keikat"}])},{label:"Etsijät",title:!0},{label:"Etsi kuski",actor:new k(0,0,"Etsi kuski",[{label:"Kuskit"},{label:"Tieto"}],[{label:"Kuski"}])},{label:"Etsi materiaali",actor:new k(0,0,"Etsi Materiaali",[{label:"Materiaalit"},{label:"Tieto"}],[{label:"Materiaali"}])},{label:"Castit",title:!0},{label:"Keikka",actor:new k(0,0,"Keikka",[{label:"Tunniste"},{label:"Kohde"},{label:"Materiaali"},{label:"Tila"},{label:"Tieto"}],[{label:"Tunniste"},{label:"Kohde"},{label:"Materiaali"},{label:"Tila"},{label:"Tieto"}])},{label:"",actor:new k(0,0,"",[{label:"Tieto"}],[])},{label:"",actor:new k(0,0,"",[{label:"Tieto"}],[])},{label:"",actor:new k(0,0,"",[{label:"Tieto"}],[])},{label:"Toiminnot",title:!0},{label:"Lisää keikka",actor:new k(0,0,"Lisää keikka",[{label:"Palvelin"},{label:"Tieto"}],[{label:"Tunniste"}])},{label:"Poista keikka",actor:new k(0,0,"Poista keikka",[{label:"Palvelin"},{label:"Tunniste"}],[{label:"Vastaus"}])},{label:"Päivitä keikka",actor:new k(0,0,"Päivitä keikka",[{label:"Palvelin"},{label:"Tunniste"},{label:"Tieto"}],[{label:"Vastaus"}])},{label:"Hae keikka",actor:new k(0,0,"Hae keikka",[{label:"Palvelin"},{label:"Tunniste"}],[{label:"Keikka"}])},{label:"Palautukset",title:!0},{label:"Palauta vastaus",actor:new k(0,0,"Palauta vastaus",[{label:"Vastaus"}],[])},{label:"Palauta tunniste",actor:new k(0,0,"Palauta tunniste",[{label:"Vastaus"},{label:"Tunniste"}],[])},{label:"Palauta tietoa",actor:new k(0,0,"Palauta tietoa",[{label:"Vastaus"},{label:"Tietoa"}],[])}],addMenuContent:[{label:"Aloitus",title:!0},{label:"Ihminen",actor:new k(0,0,"Ihminen",[],[{label:"Minä"}])},{label:"Minä",title:!0},{label:"Lompakko",actor:new k(0,0,"Lompakko",[{label:"Minä"}],[{label:"Rahaa"},{label:"Kortti"}])},{label:"Siirtymät",title:!0},{label:"Kotiin",actor:new k(0,0,"Siirry kotiin")},{label:"Prismaan",actor:new k(0,0,"Siirry Prismaan")},{label:"K- Rautaan",actor:new k(0,0,"Siirry K-Rautaan")},{label:"Lentokentälle",actor:new k(0,0,"Siirry Lentokentälle")},{label:"Kassalle",actor:new k(0,0,"Siirry kassalle",[{label:"Ostoskori"},{label:"Tuote"}],[{label:"Tuotteet"}])},{label:"Etsi",title:!0},{label:"Tomaatti",actor:new k(0,0,"Etsi tuote",[],[{label:"Tomaatti"}])},{label:"Mutteri",actor:new k(0,0,"Etsi tuote",[],[{label:"Mutteri"}])},{label:"Vasara",actor:new k(0,0,"Etsi tuote",[],[{label:"Vasara"}])},{label:"Naula",actor:new k(0,0,"Etsi tuote",[],[{label:"Naula"}])},{label:"2x4",actor:new k(0,0,"Etsi tuote",[],[{label:"2x4"}])},{label:"Teippi 10m",actor:new k(0,0,"Etsi tuote",[],[{label:"Teippi 10m"}])},{label:"Siima 100m",actor:new k(0,0,"Etsi tuote",[],[{label:"Siima 100m"}])},{label:"Uimarengas",actor:new k(0,0,"Etsi tuote",[],[{label:"Uimarengas"}])},{label:"Toiminnot",title:!0},{label:"Lisää tuote koriin",actor:new k(0,0,"Lisää tuote koriin",[{label:"Ostoskori"},{label:"Tuote"}],[{label:"Ostoskori"}])},{label:"Ota ostoskori",actor:new k(0,0,"Ota ostoskori",[],[{label:"Ostoskori"}])},{label:"Palauta ostoskori",actor:new k(0,0,"Palauta ostoskori",[{label:"Ostoskori"}],[])},{label:"Maksa ostokset",actor:new k(0,0,"Maksaostokset",[{label:"Tuotteet"},{label:"€"}],[{label:"Tuotteet"}])},{label:"Pakkaa ostokset",actor:new k(0,0,"Pakkaa ostokset",[{label:"Tuotteet"}],[{label:"Tuotteet"}])},{label:"Osta lentolippu",actor:new k(0,0,"Osta lentolippu",[{label:"€"}],[{label:"Lentolippu"}])},{label:"Nouse lentokoneeseen",actor:new k(0,0,"Nouse lentokoneeseen",[{label:"Lentolippu"}],[])},{label:"Konvertorit",title:!0},{label:"Esine rahaksi",actor:new k(0,0,"Esine rahaksi",[{label:"Maksuväline"}],[{label:"€"}])}]}},computed:{getAddMenuContent:function(){return this.proMode?this.proContent:this.addMenuContent}},watch:{objects:{handler:function(){this.draw()},deep:!0},connections:function(){this.draw()},nodeConnections:function(){this.draw()}},mounted:function(){var e=this;window.addEventListener("keyup",(function(t){"Escape"==t.key&&(e.activeActor={},e.activeNode=""),"1"==t.key&&e.connections.pop(),"2"==t.key&&e.nodeConnections.pop(),"3"==t.key&&e.objects.pop()}));var t=this.$refs.canvas,a=t.getContext("2d");t.height=window.innerHeight,t.width=window.innerWidth,a.strokeStyle="333",a.lineWidth=2},methods:{addActor:function(e){var t=Object(o["a"])({},e);t.x=this.addMenuLocation[0],t.y=this.addMenuLocation[1],this.objects.push(t),this.addMenu=!1},reset:function(){this.activeActor={},this.activeNode=""},rightClick:function(e){e.preventDefault(),this.addMenu=!0,this.addMenuLocation=[e.pageX,e.pageY]},updatePosition:function(e,t){this.objects[t].x=e[0],this.objects[t].y=e[1]},handleParamClick:function(e,t){this.activeNode.match("return_")?(this.nodeConnections.push([[this.activeActor,this.activeNode],[t,e.label]]),this.activeActor={},this.activeNode=""):(this.activeActor=t,this.activeNode="param_"+e.label)},handleReturnClick:function(e,t){this.activeActor=t,this.activeNode="return_"+e.label},handleFlowIn:function(e){return"flowout"==this.activeNode?(this.connections.push([this.activeActor,e]),void this.reset()):"flowin"!=this.activeNode?(this.activeActor=e,void(this.activeNode="flowin")):void 0},handleFlowOut:function(e){this.activeActor=e,this.activeNode="flowout"},draw:function(){var e=this,t=this.$refs.canvas,a=t.getContext("2d");a.clearRect(0,0,2e3,2e3),a.fillStyle="blue",a.strokeStyle="blue",this.connections.forEach((function(t){a.beginPath(),a.moveTo(e.objects[t[0]].x+190,e.objects[t[0]].y+20),a.quadraticCurveTo((e.objects[t[0]].x+190+e.objects[t[1]].x+20)/2,e.objects[t[0]].y+20,e.objects[t[1]].x+20-30,e.objects[t[1]].y+20),a.stroke(),a.beginPath(),a.arc(e.objects[t[0]].x+190,e.objects[t[0]].y+20,6,0,2*Math.PI),a.fill(),a.arc(e.objects[t[1]].x+20-30,e.objects[t[1]].y+20,6,0,2*Math.PI),a.fill()})),a.fillStyle="orange",a.strokeStyle="orange",this.nodeConnections.forEach((function(t){a.beginPath();var l=e.objects[t[0][0]],i=e.objects[t[1][0]],n=i.params.findIndex((function(e){return e.label==t[1][1]})),o=l.returns.findIndex((function(e){return"return_"+e.label==t[0][1]}));a.moveTo(l.x+190,l.y+20+20*o+35),a.quadraticCurveTo((l.x+190+i.x+20-30)/2,l.y+20+20*o+35,i.x+20-30,i.y+20+20*n+35),a.stroke(),a.beginPath(),a.arc(i.x+20-30,i.y+20+20*n+35,6,0,2*Math.PI),a.fill(),a.beginPath(),a.arc(l.x+190,l.y+20+20*o+35,6,0,2*Math.PI),a.fill()}))}}},w=h,y=(a("b34b"),a("b0a0"),Object(f["a"])(w,i,n,!1,null,"5edc8e44",null)),m=y.exports;l["a"].config.productionTip=!1,new l["a"]({render:function(e){return e(m)}}).$mount("#app")},"71ef":function(e,t,a){"use strict";a("eb9e")},"88ea":function(e,t,a){},b0a0:function(e,t,a){"use strict";a("452c")},b34b:function(e,t,a){"use strict";a("88ea")},eb9e:function(e,t,a){}});
//# sourceMappingURL=app.d16880f3.js.map